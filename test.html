<html>
<style>
	#container{
		width:100%;
		text-align: center;
		color: #b28d93;
		font-family: verdana;
		font-weight: bold;
	}

	#containerInner{
		width: 1000px;
		margin: 00 auto;

		overflow: hidden;
		background-color: #384063;
	}

	.row{
		clear:left;
		
		text-align: center;
	}

	.elm{
		text-align: center;
		float: left;
		margin: 10px;
		height: 380px;
		background-color: #594663;
	}

	.desc{
		text-align: left;

	}

	.first{
		width:330px;
		margin: 00 auto;
	}

	.canvasStyle{
		border:1px solid #b28d93;
		margin:5px;
	}
</style>
<body style="background-color: #0f1c29;">
<script src="polTri.js"></script>

<div id="container">
	<div id="containerInner">

		<div class="row">
			<h3></br>TestPage</h3>
		</div>

		<div class="row">
			<div class="elm">
				</br>
				<canvas id="canvas3" width="300" height="300" class="canvasStyle"> </canvas>
			</div>

			<div class="elm">
				</br>
				<canvas id="canvas4" width="300" height="300" class="canvasStyle"> </canvas>
				
			</div>

			<div class="elm">
				</br>
				<canvas id="canvas5" width="300" height="300" class="canvasStyle"> </canvas>
				
			</div>
		</div>

		<div class="row">
			<div class="elm">
				</br>
				<canvas id="canvas0" width="300" height="300" class="canvasStyle"> </canvas>
			</div>

			<div class="elm">
				</br>
				<canvas id="canvas1" width="300" height="300" class="canvasStyle"> </canvas>
				
			</div>

			<div class="elm">
				</br>
				<canvas id="canvas2" width="300" height="300" class="canvasStyle"> </canvas>
				
			</div>
		</div>

	</div>
</div>

<script type="text/javascript">

	var canvases = [];
	var contexts = [];

	for (var i = 0; i < 6; i++){
		canvases[i] = document.getElementById('canvas'+i);
		contexts[i] = canvases[i].getContext("2d");
	}

	var line1 = "#beb9c1";
	var line2 = "#68cef0";
	var line3 = "#626b8e";

	var polTri = new PolTri()

	var poly0 =[{"x":159,"y":52},{"x":145,"y":55},{"x":128,"y":63},{"x":119,"y":72},{"x":120,"y":84},{"x":123,"y":95},{"x":130,"y":103},{"x":141,"y":106},{"x":152,"y":100},{"x":155,"y":88},{"x":157,"y":78},{"x":170,"y":75},{"x":179,"y":81},{"x":182,"y":99},{"x":182,"y":110},{"x":175,"y":120},{"x":168,"y":131},{"x":158,"y":140},{"x":148,"y":146},{"x":139,"y":151},{"x":130,"y":158},{"x":125,"y":168},{"x":125,"y":193},{"x":133,"y":203},{"x":144,"y":201},{"x":152,"y":190},{"x":159,"y":173},{"x":165,"y":163},{"x":171,"y":154},{"x":180,"y":147},{"x":186,"y":164},{"x":186,"y":175},{"x":176,"y":197},{"x":169,"y":206},{"x":158,"y":220},{"x":148,"y":230},{"x":135,"y":235},{"x":121,"y":236},{"x":104,"y":235},{"x":91,"y":232},{"x":80,"y":236},{"x":67,"y":244},{"x":66,"y":255},{"x":79,"y":269},{"x":98,"y":272},{"x":116,"y":272},{"x":127,"y":272},{"x":140,"y":270},{"x":160,"y":265},{"x":170,"y":261},{"x":190,"y":249},{"x":202,"y":245},{"x":213,"y":247},{"x":216,"y":258},{"x":219,"y":271},{"x":229,"y":272},{"x":246,"y":266},{"x":254,"y":255},{"x":258,"y":243},{"x":259,"y":230},{"x":259,"y":218},{"x":252,"y":207},{"x":232,"y":204},{"x":221,"y":211},{"x":207,"y":209},{"x":208,"y":189},{"x":218,"y":176},{"x":229,"y":171},{"x":239,"y":163},{"x":241,"y":151},{"x":242,"y":137},{"x":238,"y":126},{"x":230,"y":118},{"x":217,"y":120},{"x":211,"y":135},{"x":217,"y":149},{"x":203,"y":142},{"x":201,"y":122},{"x":202,"y":108},{"x":209,"y":91},{"x":211,"y":81},{"x":205,"y":69},{"x":189,"y":55}]; 

	var poly1 =[{"x":150,"y":50},{"x":100,"y":50},{"x":125,"y":100},{"x":125,"y":150},{"x":100,"y":200},{"x":125,"y":225},{"x":125,"y":250},{"x":100,"y":275},{"x":150,"y":275}]; 

	var poly2 = [{"x":105.5,"y":31},{"x":73.5,"y":51},{"x":95.5,"y":69},{"x":135.5,"y":78},{"x":128.5,"y":94},{"x":73.5,"y":127},{"x":60.5,"y":149},{"x":73.5,"y":169},{"x":133.5,"y":183},{"x":136.5,"y":193},{"x":80.5,"y":220},{"x":75.5,"y":250},{"x":125.5,"y":271},{"x":173.5,"y":262},{"x":177.5,"y":245},{"x":151.5,"y":216},{"x":184.5,"y":210},{"x":240.5,"y":231},{"x":251.5,"y":225},{"x":232.5,"y":165},{"x":214.5,"y":153},{"x":191.5,"y":169},{"x":196.5,"y":209},{"x":176.5,"y":198},{"x":163.5,"y":171},{"x":175.5,"y":141},{"x":206.5,"y":129},{"x":215.5,"y":109},{"x":187.5,"y":99},{"x":157.5,"y":121},{"x":156.5,"y":142},{"x":135.5,"y":148},{"x":131.5,"y":124},{"x":186.5,"y":77},{"x":212.5,"y":65},{"x":220.5,"y":37},{"x":181.5,"y":28},{"x":157.5,"y":36}];

	var pp = [{"x":10,"y":10},{"x":50,"y":10},{"x":50,"y":50},{"x":10,"y":50}];
	console.log(JSON.stringify(polTri.triangulate(pp)));

	function tick(){

		var dp0 = polTri.reduceByDistance(poly0,1.1);
		var dp1 = polTri.reduceByDistance(poly0,1.2);

		var monotones0 = []
		polTri.recursiveSplit(dp0,monotones0);
		drawPolygons(contexts[0],monotones0,false,line2);
		drawPolygons(contexts[0],[dp0],true,line1,true);

		var monotones1 = []
		polTri.recursiveSplit(dp1,monotones1);
		drawPolygons(contexts[1],monotones1,false,line2);
		drawPolygons(contexts[1],[dp1],true,line1,true);

		var monotones2 = []
		polTri.recursiveSplit(poly1,monotones2);
		drawPolygons(contexts[2],monotones2,false,line2);
		drawPolygons(contexts[2],[poly1],true,line1,true);



		var monotones3 = []
		polTri.recursiveSplit(poly2,monotones3);
		drawPolygons(contexts[3],monotones3,false,line2);
		drawPolygons(contexts[3],[poly2],true,line1,true);

		var tris = [];
		for (var i = 0; i < monotones3.length; i++){			
			polTri.triangulateMonotonePolygon(monotones3[i],tris);
		}
		drawPolygons(contexts[4],tris,false,line3);
		drawPolygons(contexts[4],monotones3,false,line2,true);
		drawPolygons(contexts[4],[poly2],true,line1,true);

		var monotones4 = []
		polTri.recursiveSplit(poly3,monotones4);
		drawPolygons(contexts[5],monotones4,false,line2);
		drawPolygons(contexts[5],[poly3],true,line1,true);

	}


	function drawPolygons(ctx, polygons, drawPoints, color, dontClear){
		var i;
		var j; 

		if (!dontClear){
			ctx.clearRect(0,0,300,300);
		}
		if (drawPoints){
			ctx.lineWidth = 2;
		}else{
			ctx.lineWidth = 1;
		}
		ctx.strokeStyle = color;

		for (i = 0; i < polygons.length; i++){
			var polygon = polygons[i];
			ctx.beginPath();
			ctx.moveTo(polygon[0].x,polygon[0].y);
			if (polygon.length > 2){
				for (j = 1; j < polygon.length; j++){
					ctx.lineTo(polygon[j].x,polygon[j].y);
				}
				
				ctx.lineTo(polygon[0].x,polygon[0].y);
				
			}
			ctx.stroke();

			if(drawPoints){
				ctx.fillStyle = "#e2776d";
				for (j = 0; j < polygon.length; j++){
					ctx.fillRect(polygon[j].x-2,polygon[j].y-2,5,5);
				}
			}
		}
	}

	function drawLine(p1,p2){
	    ctx.beginPath();
	    ctx.moveTo(p1.x,p1.y);
	    ctx.lineTo(p2.x,p2.y);
	    ctx.stroke();
	}

	tick();
	setInterval(tick,16);

</script>




</body>
</html>